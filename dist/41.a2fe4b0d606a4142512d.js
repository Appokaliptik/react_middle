"use strict";(self.webpackChunkreact_middle=self.webpackChunkreact_middle||[]).push([[41],{1041:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ye});var r=n(4942),a=n(1072),o=n(7294),i=n(1715),l=n(3942),u=function(e){return e.Russia="Russia",e.Belarus="Belarus",e.Ukraine="Ukraine",e.Kazakhstan="Kazahstan",e.Armenia="Armenia",e}({}),s=n(4187),c=n(4192),d=n(5910),p=n(6723),f=n(3855);function v(e,t){let[n,r]=(0,o.useState)(e),a=(0,f.E)(e);return(0,p.e)((()=>r(a.current)),[a,r,...t]),n}var b,g=n(3784),h=n(5394),x=n(2984),m=n(2720),R=n(1363),y=n(1497),O=n(4103),C=n(4575),E=n(6567),T=n(4157),S=n(3986),j=((b=j||{})[b.None=1]="None",b[b.Focusable=2]="Focusable",b[b.Hidden=4]="Hidden",b);let I=(0,h.yV)((function(e,t){let{features:n=1,...r}=e,a={ref:t,"aria-hidden":2==(2&n)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4==(4&n)&&2!=(2&n)&&{display:"none"}}};return(0,h.sY)({ourProps:a,theirProps:r,slot:{},defaultTag:"div",name:"Hidden"})}));function P(e={},t=null,n=[]){for(let[r,a]of Object.entries(e))N(n,L(t,r),a);return n}function L(e,t){return e?e+"["+t+"]":t}function N(e,t,n){if(Array.isArray(n))for(let[r,a]of n.entries())N(e,L(t,r.toString()),a);else n instanceof Date?e.push([t,n.toISOString()]):"boolean"==typeof n?e.push([t,n?"1":"0"]):"string"==typeof n?e.push([t,n]):"number"==typeof n?e.push([t,`${n}`]):null==n?e.push([t,""]):P(n,t,e)}var A,k,w=n(5466),D=n(3781),U=n(476),z=((k=z||{})[k.Open=0]="Open",k[k.Closed=1]="Closed",k),M=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(M||{}),_=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(_||{}),F=((A=F||{})[A.OpenListbox=0]="OpenListbox",A[A.CloseListbox=1]="CloseListbox",A[A.GoToOption=2]="GoToOption",A[A.Search=3]="Search",A[A.ClearSearch=4]="ClearSearch",A[A.RegisterOption=5]="RegisterOption",A[A.UnregisterOption=6]="UnregisterOption",A[A.RegisterLabel=7]="RegisterLabel",A);function Z(e,t=(e=>e)){let n=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,r=(0,C.z2)(t(e.options.slice()),(e=>e.dataRef.current.domRef.current)),a=n?r.indexOf(n):null;return-1===a&&(a=null),{options:r,activeOptionIndex:a}}let V={1:e=>e.dataRef.current.disabled||1===e.listboxState?e:{...e,activeOptionIndex:null,listboxState:1},0(e){if(e.dataRef.current.disabled||0===e.listboxState)return e;let t=e.activeOptionIndex,{isSelected:n}=e.dataRef.current,r=e.options.findIndex((e=>n(e.dataRef.current.value)));return-1!==r&&(t=r),{...e,listboxState:0,activeOptionIndex:t}},2(e,t){var n;if(e.dataRef.current.disabled||1===e.listboxState)return e;let r=Z(e),a=(0,y.d)(t,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeOptionIndex:a,activationTrigger:null!=(n=t.trigger)?n:1}},3:(e,t)=>{if(e.dataRef.current.disabled||1===e.listboxState)return e;let n=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),a=(null!==e.activeOptionIndex?e.options.slice(e.activeOptionIndex+n).concat(e.options.slice(0,e.activeOptionIndex+n)):e.options).find((e=>{var t;return!e.dataRef.current.disabled&&(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))})),o=a?e.options.indexOf(a):-1;return-1===o||o===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:o,activationTrigger:1}},4:e=>e.dataRef.current.disabled||1===e.listboxState||""===e.searchQuery?e:{...e,searchQuery:""},5:(e,t)=>{let n={id:t.id,dataRef:t.dataRef},r=Z(e,(e=>[...e,n]));return null===e.activeOptionIndex&&e.dataRef.current.isSelected(t.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(n)),{...e,...r}},6:(e,t)=>{let n=Z(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...n,activationTrigger:1}},7:(e,t)=>({...e,labelId:t.id})},G=(0,o.createContext)(null);function B(e){let t=(0,o.useContext)(G);if(null===t){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,B),t}return t}G.displayName="ListboxActionsContext";let Y=(0,o.createContext)(null);function $(e){let t=(0,o.useContext)(Y);if(null===t){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,$),t}return t}function W(e,t){return(0,x.E)(t.type,V,e,t)}Y.displayName="ListboxDataContext";let Q=o.Fragment,K=h.AN.RenderStrategy|h.AN.Static,H=(0,h.yV)((function(e,t){let{value:n,defaultValue:r,name:a,onChange:i,by:l=((e,t)=>e===t),disabled:u=!1,horizontal:s=!1,multiple:d=!1,...f}=e;const v=s?"horizontal":"vertical";let b=(0,g.T)(t),[m=(d?[]:void 0),R]=function(e,t,n){let[r,a]=(0,o.useState)(n),i=void 0!==e,l=(0,o.useRef)(i),u=(0,o.useRef)(!1),s=(0,o.useRef)(!1);return!i||l.current||u.current?!i&&l.current&&!s.current&&(s.current=!0,l.current=i,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(u.current=!0,l.current=i,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[i?e:r,(0,D.z)((e=>(i||a(e),null==t?void 0:t(e))))]}(n,i,r),[O,T]=(0,o.useReducer)(W,{dataRef:(0,o.createRef)(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),L=(0,o.useRef)({static:!1,hold:!1}),N=(0,o.useRef)(null),A=(0,o.useRef)(null),k=(0,o.useRef)(null),w=(0,D.z)("string"==typeof l?(e,t)=>{let n=l;return(null==e?void 0:e[n])===(null==t?void 0:t[n])}:l),U=(0,o.useCallback)((e=>(0,x.E)(z.mode,{1:()=>m.some((t=>w(t,e))),0:()=>w(m,e)})),[m]),z=(0,o.useMemo)((()=>({...O,value:m,disabled:u,mode:d?1:0,orientation:v,compare:w,isSelected:U,optionsPropsRef:L,labelRef:N,buttonRef:A,optionsRef:k})),[m,u,d,O]);(0,p.e)((()=>{O.dataRef.current=z}),[z]),(0,S.O)([z.buttonRef,z.optionsRef],((e,t)=>{var n;T({type:1}),(0,C.sP)(t,C.tJ.Loose)||(e.preventDefault(),null==(n=z.buttonRef.current)||n.focus())}),0===z.listboxState);let M=(0,o.useMemo)((()=>({open:0===z.listboxState,disabled:u,value:m})),[z,u,m]),_=(0,D.z)((e=>{let t=z.options.find((t=>t.id===e));t&&H(t.dataRef.current.value)})),F=(0,D.z)((()=>{if(null!==z.activeOptionIndex){let{dataRef:e,id:t}=z.options[z.activeOptionIndex];H(e.current.value),T({type:2,focus:y.T.Specific,id:t})}})),Z=(0,D.z)((()=>T({type:0}))),V=(0,D.z)((()=>T({type:1}))),B=(0,D.z)(((e,t,n)=>e===y.T.Specific?T({type:2,focus:y.T.Specific,id:t,trigger:n}):T({type:2,focus:e,trigger:n}))),$=(0,D.z)(((e,t)=>(T({type:5,id:e,dataRef:t}),()=>T({type:6,id:e})))),K=(0,D.z)((e=>(T({type:7,id:e}),()=>T({type:7,id:null})))),H=(0,D.z)((e=>(0,x.E)(z.mode,{0:()=>null==R?void 0:R(e),1(){let t=z.value.slice(),n=t.findIndex((t=>w(t,e)));return-1===n?t.push(e):t.splice(n,1),null==R?void 0:R(t)}}))),J=(0,D.z)((e=>T({type:3,value:e}))),q=(0,D.z)((()=>T({type:4}))),X=(0,o.useMemo)((()=>({onChange:H,registerOption:$,registerLabel:K,goToOption:B,closeListbox:V,openListbox:Z,selectActiveOption:F,selectOption:_,search:J,clearSearch:q})),[]),ee={ref:b},te=(0,o.useRef)(null),ne=(0,c.G)();return(0,o.useEffect)((()=>{te.current&&void 0!==r&&ne.addEventListener(te.current,"reset",(()=>{H(r)}))}),[te,H]),o.createElement(G.Provider,{value:X},o.createElement(Y.Provider,{value:z},o.createElement(E.up,{value:(0,x.E)(z.listboxState,{0:E.ZM.Open,1:E.ZM.Closed})},null!=a&&null!=m&&P({[a]:m}).map((([e,t],n)=>o.createElement(I,{features:j.Hidden,ref:0===n?e=>{var t;te.current=null!=(t=null==e?void 0:e.closest("form"))?t:null}:void 0,...(0,h.oA)({key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:e,value:t})}))),(0,h.sY)({ourProps:ee,theirProps:f,slot:M,defaultTag:Q,name:"Listbox"}))))})),J=(0,h.yV)((function(e,t){var n;let r=(0,d.M)(),{id:a=`headlessui-listbox-button-${r}`,...i}=e,l=$("Listbox.Button"),u=B("Listbox.Button"),s=(0,g.T)(l.buttonRef,t),p=(0,c.G)(),f=(0,D.z)((e=>{switch(e.key){case R.R.Space:case R.R.Enter:case R.R.ArrowDown:e.preventDefault(),u.openListbox(),p.nextFrame((()=>{l.value||u.goToOption(y.T.First)}));break;case R.R.ArrowUp:e.preventDefault(),u.openListbox(),p.nextFrame((()=>{l.value||u.goToOption(y.T.Last)}))}})),b=(0,D.z)((e=>{e.key===R.R.Space&&e.preventDefault()})),x=(0,D.z)((e=>{if((0,O.P)(e.currentTarget))return e.preventDefault();0===l.listboxState?(u.closeListbox(),p.nextFrame((()=>{var e;return null==(e=l.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),u.openListbox())})),m=v((()=>{if(l.labelId)return[l.labelId,a].join(" ")}),[l.labelId,a]),C=(0,o.useMemo)((()=>({open:0===l.listboxState,disabled:l.disabled,value:l.value})),[l]),E={ref:s,id:a,type:(0,T.f)(e,l.buttonRef),"aria-haspopup":"listbox","aria-controls":null==(n=l.optionsRef.current)?void 0:n.id,"aria-expanded":l.disabled?void 0:0===l.listboxState,"aria-labelledby":m,disabled:l.disabled,onKeyDown:f,onKeyUp:b,onClick:x};return(0,h.sY)({ourProps:E,theirProps:i,slot:C,defaultTag:"button",name:"Listbox.Button"})})),q=(0,h.yV)((function(e,t){let n=(0,d.M)(),{id:r=`headlessui-listbox-label-${n}`,...a}=e,i=$("Listbox.Label"),l=B("Listbox.Label"),u=(0,g.T)(i.labelRef,t);(0,p.e)((()=>l.registerLabel(r)),[r]);let s=(0,D.z)((()=>{var e;return null==(e=i.buttonRef.current)?void 0:e.focus({preventScroll:!0})})),c=(0,o.useMemo)((()=>({open:0===i.listboxState,disabled:i.disabled})),[i]);return(0,h.sY)({ourProps:{ref:u,id:r,onClick:s},theirProps:a,slot:c,defaultTag:"label",name:"Listbox.Label"})})),X=(0,h.yV)((function(e,t){var n;let r=(0,d.M)(),{id:a=`headlessui-listbox-options-${r}`,...i}=e,l=$("Listbox.Options"),u=B("Listbox.Options"),s=(0,g.T)(l.optionsRef,t),p=(0,c.G)(),f=(0,c.G)(),b=(0,E.oJ)(),O=null!==b?(b&E.ZM.Open)===E.ZM.Open:0===l.listboxState;(0,o.useEffect)((()=>{var e;let t=l.optionsRef.current;t&&0===l.listboxState&&t!==(null==(e=(0,w.r)(t))?void 0:e.activeElement)&&t.focus({preventScroll:!0})}),[l.listboxState,l.optionsRef]);let C=(0,D.z)((e=>{switch(f.dispose(),e.key){case R.R.Space:if(""!==l.searchQuery)return e.preventDefault(),e.stopPropagation(),u.search(e.key);case R.R.Enter:if(e.preventDefault(),e.stopPropagation(),null!==l.activeOptionIndex){let{dataRef:e}=l.options[l.activeOptionIndex];u.onChange(e.current.value)}0===l.mode&&(u.closeListbox(),(0,m.k)().nextFrame((()=>{var e;return null==(e=l.buttonRef.current)?void 0:e.focus({preventScroll:!0})})));break;case(0,x.E)(l.orientation,{vertical:R.R.ArrowDown,horizontal:R.R.ArrowRight}):return e.preventDefault(),e.stopPropagation(),u.goToOption(y.T.Next);case(0,x.E)(l.orientation,{vertical:R.R.ArrowUp,horizontal:R.R.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),u.goToOption(y.T.Previous);case R.R.Home:case R.R.PageUp:return e.preventDefault(),e.stopPropagation(),u.goToOption(y.T.First);case R.R.End:case R.R.PageDown:return e.preventDefault(),e.stopPropagation(),u.goToOption(y.T.Last);case R.R.Escape:return e.preventDefault(),e.stopPropagation(),u.closeListbox(),p.nextFrame((()=>{var e;return null==(e=l.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));case R.R.Tab:e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(u.search(e.key),f.setTimeout((()=>u.clearSearch()),350))}})),T=v((()=>{var e,t,n;return null!=(n=null==(e=l.labelRef.current)?void 0:e.id)?n:null==(t=l.buttonRef.current)?void 0:t.id}),[l.labelRef.current,l.buttonRef.current]),S=(0,o.useMemo)((()=>({open:0===l.listboxState})),[l]),j={"aria-activedescendant":null===l.activeOptionIndex||null==(n=l.options[l.activeOptionIndex])?void 0:n.id,"aria-multiselectable":1===l.mode||void 0,"aria-labelledby":T,"aria-orientation":l.orientation,id:a,onKeyDown:C,role:"listbox",tabIndex:0,ref:s};return(0,h.sY)({ourProps:j,theirProps:i,slot:S,defaultTag:"ul",features:K,visible:O,name:"Listbox.Options"})})),ee=(0,h.yV)((function(e,t){let n=(0,d.M)(),{id:r=`headlessui-listbox-option-${n}`,disabled:a=!1,value:i,...l}=e,u=$("Listbox.Option"),s=B("Listbox.Option"),c=null!==u.activeOptionIndex&&u.options[u.activeOptionIndex].id===r,v=u.isSelected(i),b=(0,o.useRef)(null),x=(0,f.E)({disabled:a,value:i,domRef:b,get textValue(){var e,t;return null==(t=null==(e=b.current)?void 0:e.textContent)?void 0:t.toLowerCase()}}),R=(0,g.T)(t,b);(0,p.e)((()=>{if(0!==u.listboxState||!c||0===u.activationTrigger)return;let e=(0,m.k)();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=b.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[b,c,u.listboxState,u.activationTrigger,u.activeOptionIndex]),(0,p.e)((()=>s.registerOption(r,x)),[x,r]);let O=(0,D.z)((e=>{if(a)return e.preventDefault();s.onChange(i),0===u.mode&&(s.closeListbox(),(0,m.k)().nextFrame((()=>{var e;return null==(e=u.buttonRef.current)?void 0:e.focus({preventScroll:!0})})))})),C=(0,D.z)((()=>{if(a)return s.goToOption(y.T.Nothing);s.goToOption(y.T.Specific,r)})),E=(0,U.g)(),T=(0,D.z)((e=>E.update(e))),S=(0,D.z)((e=>{E.wasMoved(e)&&(a||c||s.goToOption(y.T.Specific,r,0))})),j=(0,D.z)((e=>{E.wasMoved(e)&&(a||c&&s.goToOption(y.T.Nothing))})),I=(0,o.useMemo)((()=>({active:c,selected:v,disabled:a})),[c,v,a]);return(0,h.sY)({ourProps:{id:r,ref:R,role:"option",tabIndex:!0===a?void 0:-1,"aria-disabled":!0===a||void 0,"aria-selected":v,disabled:void 0,onClick:O,onFocus:C,onPointerEnter:T,onMouseEnter:T,onPointerMove:S,onMouseMove:S,onPointerLeave:j,onMouseLeave:j},theirProps:l,slot:I,defaultTag:"li",name:"Listbox.Option"})})),te=Object.assign(H,{Button:J,Label:q,Options:X,Option:ee});var ne=n(9457),re=n(5893),ae={"bottom left":"oFXYv","bottom right":"Jl5DR","top right":"c68gv","top left":"aacUe"};function oe(e){var t=e.className,n=e.items,a=e.defaultValue,i=e.label,l=e.readonly,u=e.value,c=e.onChange,d=e.direction,p=[ae[void 0===d?"bottom right":d]];return(0,re.jsxs)(ne.U,{gap:"8",children:[i&&i,(0,re.jsxs)(te,{as:"div",className:(0,s.A)("Lsvjv",{},[t]),value:u,onChange:c,disabled:l,children:[(0,re.jsx)(te.Button,{className:"qrO2m",children:null!=u?u:a}),(0,re.jsx)(te.Options,{className:(0,s.A)("V57wM",{},p),children:n.map((function(e){return(0,re.jsx)(te.Option,{value:e.value,disabled:e.disabled,as:o.Fragment,children:function(t){var n,a=t.active,o=t.selected;return(0,re.jsx)("li",{className:(0,s.A)("mBjSA",(n={},(0,r.Z)(n,"lE7ga",a),(0,r.Z)(n,"wy24X",o),(0,r.Z)(n,"yYTJV",e.disabled),n)),children:e.content})}},e.value)}))})]})]})}var ie=[{value:u.Armenia,content:u.Armenia},{value:u.Belarus,content:u.Belarus},{value:u.Kazakhstan,content:u.Kazakhstan},{value:u.Russia,content:u.Russia},{value:u.Ukraine,content:u.Ukraine}],le=(0,o.memo)((function(e){var t=e.className,n=e.value,r=e.onChange,i=e.readonly,l=e.direction,u=(0,a.$G)("translation").t,c=(0,o.useCallback)((function(e){null==r||r(e)}),[r]);return(0,re.jsx)(oe,{className:(0,s.A)("",{},[t]),value:n,label:u("Country"),onChange:c,items:ie,readonly:i,direction:l})})),ue=function(e){return e.RUB="RUB",e.EUR="EUR",e.USD="USD",e}({}),se=[{value:ue.EUR,content:ue.EUR},{value:ue.RUB,content:ue.RUB},{value:ue.USD,content:ue.USD}],ce=(0,o.memo)((function(e){var t=e.className,n=e.value,r=e.onChange,i=e.readonly,l=e.direction,u=(0,a.$G)("translation").t,c=(0,o.useCallback)((function(e){null==r||r(e)}),[r]);return(0,re.jsx)(oe,{className:(0,s.A)("",{},[t]),value:n,label:u("currency"),onChange:c,items:se,readonly:i,direction:l})})),de=n(2949),pe=n(8312),fe=n(3212);const ve={ProfileCard:"wW9jg",editForm:"U9LGH",loading:"t07Zx",error:"i5YK3",avatarWrapper:"bEFNS"};var be=function(e){var t=e.className,n=e.data,o=e.isLoading,l=e.error,u=e.readonly,c=e.onChangeFirst,d=e.onChangeLastname,p=e.onChangeAge,f=e.onChangeCity,v=e.onChangeUsername,b=e.onChangeAvatar,g=e.onChangeCountry,h=e.onChangeCurrency,x=(0,a.$G)("profile").t,m=(0,r.Z)({},ve.editForm,!u);return o?(0,re.jsx)(ne.g,{max:!0,justify:"center",align:"center",className:(0,s.A)(ve.ProfileCard,{},[t,ve.loading]),children:(0,re.jsx)(fe.a,{})}):l?(0,re.jsx)(ne.g,{max:!0,className:(0,s.A)(ve.ProfileCard,{},[t,ve.error]),children:(0,re.jsx)(i.xv,{theme:i.lg.ERROR,title:x("profile error"),text:x("profile error text"),align:i.PH.CENTER})}):(0,re.jsxs)(ne.g,{gap:"16",max:!0,className:(0,s.A)(ve.ProfileCard,m,[t]),children:[(null==n?void 0:n.avatar)&&(0,re.jsx)(ne.U,{justify:"center",className:ve.avatarWrapper,children:(0,re.jsx)(de.q,{src:n.avatar})}),(0,re.jsx)(pe.I,{value:null==n?void 0:n.first,placeholder:x("input firstname"),readonly:u,onChange:c}),(0,re.jsx)(pe.I,{className:ve.input,value:null==n?void 0:n.lastname,placeholder:x("input lastname"),readonly:u,onChange:d}),(0,re.jsx)(pe.I,{className:ve.input,value:null==n?void 0:n.age,placeholder:x("input age"),readonly:u,onChange:p}),(0,re.jsx)(pe.I,{className:ve.input,value:null==n?void 0:n.city,placeholder:x("input city"),readonly:u,onChange:f}),(0,re.jsx)(pe.I,{className:ve.input,value:null==n?void 0:n.username,placeholder:x("input username"),readonly:u,onChange:v}),(0,re.jsx)(pe.I,{className:ve.input,value:null==n?void 0:n.avatar,placeholder:x("input avatar"),readonly:u,onChange:b}),(0,re.jsx)(le,{className:ve.input,value:null==n?void 0:n.country,readonly:u,onChange:g,direction:"top right"}),(0,re.jsx)(ce,{className:ve.input,value:null==n?void 0:n.currency,readonly:u,onChange:h,direction:"top right"})]})},ge=n(9169),he=n(9728),xe=n(9258),me=function(e){return e.INCORRECT_USER_DATA="INCORRECT_USER_DATA",e.INCORRECT_AGE="INCORRECT_AGE",e.INCORRECT_CITY="INCORRECT_CITY",e.NO_DATA="NO_DATA",e.SERVER_ERROR="SERVER_ERROR",e}({}),Re=n(5861),ye=n(4687),Oe=n.n(ye),Ce=n(4268),Ee=(0,Ce.hg)("profile/fetchProfileData",function(){var e=(0,Re.Z)(Oe().mark((function e(t,n){var r,a,o;return Oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.extra,a=n.rejectWithValue,e.prev=1,e.next=4,r.api.get("/profile/".concat(t));case 4:if((o=e.sent).data){e.next=7;break}throw new Error;case 7:return e.abrupt("return",o.data);case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",a("error"));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),Te=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.error},Se=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.form},je=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.isLoading},Ie=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.readonly},Pe=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.validateErrors},Le=function(e){if(!e)return[me.NO_DATA];var t=e.first,n=e.lastname,r=e.age,a=e.city,o=[];return t&&n||o.push(me.INCORRECT_USER_DATA),(!r||r<18||r>100)&&o.push(me.INCORRECT_AGE),a||o.push(me.INCORRECT_CITY),o},Ne=(0,Ce.hg)("profile/updateProfileData",function(){var e=(0,Re.Z)(Oe().mark((function e(t,n){var r,a,o,i,l,u;return Oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.extra,a=n.rejectWithValue,o=n.getState,i=Se(o()),!(l=Le(i)).length){e.next=5;break}return e.abrupt("return",a(l));case 5:return e.prev=5,e.next=8,r.api.put("/profile/".concat(null==i?void 0:i.id),i);case 8:if((u=e.sent).data){e.next=11;break}throw new Error;case 11:return e.abrupt("return",u.data);case 14:return e.prev=14,e.t0=e.catch(5),console.log(e.t0),e.abrupt("return",a([me.SERVER_ERROR]));case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,n){return e.apply(this,arguments)}}());function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we=(0,Ce.oM)({name:"profile",initialState:{data:void 0,isLoading:!1,readonly:!0,error:void 0},reducers:{setReadonly:function(e,t){e.readonly=t.payload},cancelEdit:function(e){e.readonly=!0,e.form=e.data,e.validateErrors=void 0},updateProfile:function(e,t){e.form=ke(ke({},e.form),t.payload)}},extraReducers:function(e){e.addCase(Ee.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(Ee.fulfilled,(function(e,t){e.isLoading=!1,e.data=t.payload,e.form=t.payload})).addCase(Ee.rejected,(function(e,t){e.isLoading=!1,e.error=t.payload})).addCase(Ne.pending,(function(e){e.validateErrors=void 0,e.isLoading=!0})).addCase(Ne.fulfilled,(function(e,t){e.isLoading=!1,e.data=t.payload,e.form=t.payload,e.readonly=!0,e.validateErrors=void 0})).addCase(Ne.rejected,(function(e,t){e.isLoading=!1,e.validateErrors=t.payload}))}}),De=we.actions,Ue=we.reducer,ze=n(5997),Me=n(5255),_e=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.data},Fe=function(e){e.className;var t=(0,a.$G)("profile").t,n=(0,l.v9)(_e),r=(0,l.v9)(ze.m5),u=(null==n?void 0:n.id)===(null==r?void 0:r.id),s=(0,l.v9)(Ie),c=(0,ge.T)(),d=(0,o.useCallback)((function(){c(De.setReadonly(!1))}),[c]),p=(0,o.useCallback)((function(){c(De.cancelEdit())}),[c]),f=(0,o.useCallback)((function(){c(Ne())}),[c]);return(0,re.jsxs)(ne.U,{justify:"between",max:!0,children:[(0,re.jsx)(i.xv,{title:t("profile page")}),u&&(0,re.jsx)(ne.U,{children:s?(0,re.jsx)(Me.zx,{theme:Me.Wu.OUTLINE,onClick:d,children:t("edit")}):(0,re.jsxs)(ne.U,{gap:"8",children:[(0,re.jsx)(Me.zx,{theme:Me.Wu.OUTLINE,onClick:f,children:t("Save")}),(0,re.jsx)(Me.zx,{theme:Me.Wu.OUTLINE_RED,onClick:p,children:t("Cancel")})]})})]})},Ze={profile:Ue},Ve=(0,o.memo)((function(e){var t,n=e.className,u=e.id,c=(0,a.$G)("profile").t,d=(0,ge.T)(),p=(0,l.v9)(Se),f=(0,l.v9)(je),v=(0,l.v9)(Te),b=(0,l.v9)(Ie),g=(0,l.v9)(Pe);(0,he.Q)((function(){u&&d(Ee(u))}));var h=(t={},(0,r.Z)(t,me.INCORRECT_AGE,c("incorrect age")),(0,r.Z)(t,me.INCORRECT_CITY,c("incorrect  city")),(0,r.Z)(t,me.INCORRECT_USER_DATA,c("incorrect user data")),(0,r.Z)(t,me.NO_DATA,c("incorrect data")),(0,r.Z)(t,me.SERVER_ERROR,c("incorrect server error")),t),x=(0,o.useCallback)((function(e){d(De.updateProfile({first:e||""}))}),[d]),m=(0,o.useCallback)((function(e){d(De.updateProfile({lastname:e||""}))}),[d]),R=(0,o.useCallback)((function(e){d(De.updateProfile({age:Number((null==e?void 0:e.replace(/\D/gi,""))||0)}))}),[d]),y=(0,o.useCallback)((function(e){d(De.updateProfile({city:e||""}))}),[d]),O=(0,o.useCallback)((function(e){d(De.updateProfile({username:e||""}))}),[d]),C=(0,o.useCallback)((function(e){d(De.updateProfile({avatar:e||""}))}),[d]),E=(0,o.useCallback)((function(e){d(De.updateProfile({currency:e}))}),[d]),T=(0,o.useCallback)((function(e){d(De.updateProfile({country:e}))}),[d]);return(0,re.jsx)(xe.W,{reducers:Ze,children:(0,re.jsxs)(ne.g,{gap:"16",max:!0,className:(0,s.A)("",{},[n]),children:[(0,re.jsx)(Fe,{}),(null==g?void 0:g.length)&&g.map((function(e){return(0,re.jsx)(i.xv,{theme:i.lg.ERROR,text:h[e]},e)})),(0,re.jsx)(be,{data:p,isLoading:f,error:v,readonly:b,onChangeFirst:x,onChangeLastname:m,onChangeAge:R,onChangeCity:y,onChangeUsername:O,onChangeAvatar:C,onChangeCurrency:E,onChangeCountry:T})]})})})),Ge=n(6974),Be=n(4876);const Ye=function(e){var t=e.className,n=(0,a.$G)("profile").t,r=(0,Ge.UO)().id;return r?(0,re.jsx)(Be.T,{className:(0,s.A)("",{},[t]),children:(0,re.jsx)(ne.g,{gap:"16",children:(0,re.jsx)(Ve,{id:r})})}):(0,re.jsx)(i.xv,{text:n("profile not found")})}},9258:(e,t,n)=>{n.d(t,{W:()=>l});var r=n(9439),a=n(7294),o=n(3942),i=n(5893),l=function(e){var t=e.children,n=e.reducers,l=e.removeAfterUnmount,u=void 0===l||l,s=(0,o.oR)(),c=(0,o.I0)();return(0,a.useEffect)((function(){var e=s.reducerManager.getReducerMap();return Object.entries(n).forEach((function(t){var n=(0,r.Z)(t,2),a=n[0],o=n[1];e[a]||(s.reducerManager.add(a,o),c({type:"@INIT ".concat(a," reducer")}))})),function(){u&&Object.entries(n).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0];t[1],s.reducerManager.remove(n),c({type:"@DESTROY ".concat(n," reducer")})}))}}),[]),(0,i.jsx)(i.Fragment,{children:t})}},8312:(e,t,n)=>{n.d(t,{I:()=>p});var r=n(4942),a=n(4925),o=n(4187),i=n(7294);var l=n(9457),u=n(5893),s=["className","value","onChange","type","placeholder","readonly"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=(0,i.memo)((function(e){var t=e.className,n=e.value,i=void 0===n?"":n,c=e.onChange,p=e.type,f=void 0===p?"text":p,v=e.placeholder,b=e.readonly,g=(0,a.Z)(e,s),h=(0,r.Z)({},"fTN1P",b);return(0,u.jsxs)(l.g,{gap:"4",max:!0,className:(0,o.A)("LuFDU",h,[t]),children:[(0,u.jsx)("div",{children:v}),(0,u.jsx)("input",d({type:f,onChange:function(e){null==c||c(e.target.value)},className:"X8EVb",placeholder:v,value:i,readOnly:b},g))]})}))}}]);