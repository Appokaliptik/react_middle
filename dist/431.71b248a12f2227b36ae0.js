"use strict";(self.webpackChunkreact_middle=self.webpackChunkreact_middle||[]).push([[431],{2431:(e,a,r)=>{r.r(a),r.d(a,{default:()=>b});var s=r(7294),t=r(9887),n=r(3942),o=r(4187),d=r(5255),l=r(8312),c=r(1715),i=r(9169),u=r(8205);const m=e=>e?.LoginForm?.password||"",g=e=>e?.LoginForm?.isLoading||!1,p=e=>e?.LoginForm?.error||"",h=e=>e?.LoginForm?.username||"";var v=r(4268),x=r(5321),f=r(1283);const y=(0,v.hg)("login/loginByUsername",(async(e,a)=>{const{extra:r,dispatch:s,rejectWithValue:t}=a;try{const a=await r.api.post("/login",e);if(!a.data)throw new Error("No data");return localStorage.setItem(f.z,JSON.stringify(a.data)),s(x.EJ.setAuthData(a.data)),a.data}catch(e){return console.log(e),t("error")}})),j=(0,v.oM)({name:"login",initialState:{username:"",password:"",isLoading:!1},reducers:{setUsername:(e,a)=>{e.username=a.payload},setPassword:(e,a)=>{e.password=a.payload}},extraReducers:e=>{e.addCase(y.pending,((e,a)=>{e.error=void 0,e.isLoading=!0})).addCase(y.fulfilled,((e,a)=>{let{payload:r}=a;e.isLoading=!1})).addCase(y.rejected,((e,a)=>{e.isLoading=!1,e.error=a.payload}))}}),{actions:N}=j,{reducer:C}=j,w="PQPa1";var L=r(5893);const E={LoginForm:C},b=(0,s.memo)((e=>{let{className:a,onSuccess:r}=e;const{t:v}=(0,t.$G)(),x=(0,i.T)(),f=(0,n.v9)(h),j=(0,n.v9)(m),C=(0,n.v9)(g),b=(0,n.v9)(p),I=(0,s.useCallback)((e=>{x(N.setUsername(e))}),[x]),k=(0,s.useCallback)((e=>{x(N.setPassword(e))}),[x]),F=(0,s.useCallback)((async()=>{"fulfilled"===(await x(y({username:f,password:j}))).meta.requestStatus&&r()}),[x,f,j,r]);return(0,L.jsx)(u.W,{reducers:E,children:(0,L.jsxs)("div",{className:(0,o.A)("xYNEf",{},[a]),children:[(0,L.jsx)(c.xv,{title:v("LoginForm")}),b&&(0,L.jsx)(c.xv,{text:v("errorForm"),theme:c.lg.ERROR}),(0,L.jsx)(l.I,{className:w,placeholder:v("Input name"),onChange:I,value:f}),(0,L.jsx)(l.I,{className:w,placeholder:v("Input password"),onChange:k,value:j}),(0,L.jsx)(d.zx,{type:"submit",theme:d.Wu.BACKGROUND_INVERTED,className:"Ok_5a",onClick:F,disabled:C,children:v("Login")})]})})}))},8205:(e,a,r)=>{r.d(a,{W:()=>o});var s=r(7294),t=r(3942),n=r(5893);const o=e=>{const{children:a,reducers:r,removeAfterUnmount:o=!0}=e,d=(0,t.oR)(),l=(0,t.I0)();return(0,s.useEffect)((()=>{const e=d.reducerManager.getReducerMap();return Object.entries(r).forEach((a=>{let[r,s]=a;e[r]||(d.reducerManager.add(r,s),l({type:`@INIT ${r} reducer`}))})),()=>{o&&Object.entries(r).forEach((e=>{let[a,r]=e;d.reducerManager.remove(a),l({type:`@DESTROY ${a} reducer`})}))}}),[]),(0,n.jsx)(n.Fragment,{children:a})}},8312:(e,a,r)=>{r.d(a,{I:()=>d});var s=r(7294),t=r(4187);var n=r(9457),o=r(5893);const d=(0,s.memo)((e=>{const{className:a,value:r="",onChange:s,type:d="text",placeholder:l,readonly:c,...i}=e,u={fTN1P:c};return(0,o.jsxs)(n.g,{gap:"4",max:!0,className:(0,t.A)("LuFDU",u,[a]),children:[(0,o.jsx)("div",{children:l}),(0,o.jsx)("input",{type:d,onChange:e=>{s?.(e.target.value)},className:"X8EVb",placeholder:l,value:r,readOnly:c,...i})]})}))}}]);