"use strict";(self.webpackChunkreact_middle=self.webpackChunkreact_middle||[]).push([[478],{9478:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ye});var r,a=n(5893),o=n(9887),i=n(7294),l=n(7053),u=n(3942);!function(e){e.Russia="Russia",e.Belarus="Belarus",e.Ukraine="Ukraine",e.Kazakhstan="Kazahstan",e.Armenia="Armenia"}(r||(r={}));var s=n(3838),c=n(4192),d=n(5910),p=n(6723),f=n(3855);function v(e,t){let[n,r]=(0,i.useState)(e),a=(0,f.E)(e);return(0,p.e)((()=>r(a.current)),[a,r,...t]),n}var h,b=n(3784),g=n(5394),x=n(2984),y=n(2720),m=n(1363),R=n(1497),O=n(4103),C=n(4575),E=n(6567),T=n(4157),S=n(3986),j=((h=j||{})[h.None=1]="None",h[h.Focusable=2]="Focusable",h[h.Hidden=4]="Hidden",h);let w=(0,g.yV)((function(e,t){let{features:n=1,...r}=e,a={ref:t,"aria-hidden":2==(2&n)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4==(4&n)&&2!=(2&n)&&{display:"none"}}};return(0,g.sY)({ourProps:a,theirProps:r,slot:{},defaultTag:"div",name:"Hidden"})}));function I(e={},t=null,n=[]){for(let[r,a]of Object.entries(e))L(n,P(t,r),a);return n}function P(e,t){return e?e+"["+t+"]":t}function L(e,t,n){if(Array.isArray(n))for(let[r,a]of n.entries())L(e,P(t,r.toString()),a);else n instanceof Date?e.push([t,n.toISOString()]):"boolean"==typeof n?e.push([t,n?"1":"0"]):"string"==typeof n?e.push([t,n]):"number"==typeof n?e.push([t,`${n}`]):null==n?e.push([t,""]):I(n,t,e)}var N,A,k=n(5466),D=n(3781),U=n(476),z=((A=z||{})[A.Open=0]="Open",A[A.Closed=1]="Closed",A),M=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(M||{}),_=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(_||{}),F=((N=F||{})[N.OpenListbox=0]="OpenListbox",N[N.CloseListbox=1]="CloseListbox",N[N.GoToOption=2]="GoToOption",N[N.Search=3]="Search",N[N.ClearSearch=4]="ClearSearch",N[N.RegisterOption=5]="RegisterOption",N[N.UnregisterOption=6]="UnregisterOption",N[N.RegisterLabel=7]="RegisterLabel",N);function V(e,t=(e=>e)){let n=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,r=(0,C.z2)(t(e.options.slice()),(e=>e.dataRef.current.domRef.current)),a=n?r.indexOf(n):null;return-1===a&&(a=null),{options:r,activeOptionIndex:a}}let G={1:e=>e.dataRef.current.disabled||1===e.listboxState?e:{...e,activeOptionIndex:null,listboxState:1},0(e){if(e.dataRef.current.disabled||0===e.listboxState)return e;let t=e.activeOptionIndex,{isSelected:n}=e.dataRef.current,r=e.options.findIndex((e=>n(e.dataRef.current.value)));return-1!==r&&(t=r),{...e,listboxState:0,activeOptionIndex:t}},2(e,t){var n;if(e.dataRef.current.disabled||1===e.listboxState)return e;let r=V(e),a=(0,R.d)(t,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeOptionIndex:a,activationTrigger:null!=(n=t.trigger)?n:1}},3:(e,t)=>{if(e.dataRef.current.disabled||1===e.listboxState)return e;let n=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),a=(null!==e.activeOptionIndex?e.options.slice(e.activeOptionIndex+n).concat(e.options.slice(0,e.activeOptionIndex+n)):e.options).find((e=>{var t;return!e.dataRef.current.disabled&&(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))})),o=a?e.options.indexOf(a):-1;return-1===o||o===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:o,activationTrigger:1}},4:e=>e.dataRef.current.disabled||1===e.listboxState||""===e.searchQuery?e:{...e,searchQuery:""},5:(e,t)=>{let n={id:t.id,dataRef:t.dataRef},r=V(e,(e=>[...e,n]));return null===e.activeOptionIndex&&e.dataRef.current.isSelected(t.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(n)),{...e,...r}},6:(e,t)=>{let n=V(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...n,activationTrigger:1}},7:(e,t)=>({...e,labelId:t.id})},B=(0,i.createContext)(null);function Y(e){let t=(0,i.useContext)(B);if(null===t){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Y),t}return t}B.displayName="ListboxActionsContext";let $=(0,i.createContext)(null);function W(e){let t=(0,i.useContext)($);if(null===t){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,W),t}return t}function H(e,t){return(0,x.E)(t.type,G,e,t)}$.displayName="ListboxDataContext";let Q=i.Fragment,K=g.AN.RenderStrategy|g.AN.Static,Z=(0,g.yV)((function(e,t){let{value:n,defaultValue:r,name:a,onChange:o,by:l=((e,t)=>e===t),disabled:u=!1,horizontal:s=!1,multiple:d=!1,...f}=e;const v=s?"horizontal":"vertical";let h=(0,b.T)(t),[y=(d?[]:void 0),m]=function(e,t,n){let[r,a]=(0,i.useState)(n),o=void 0!==e,l=(0,i.useRef)(o),u=(0,i.useRef)(!1),s=(0,i.useRef)(!1);return!o||l.current||u.current?!o&&l.current&&!s.current&&(s.current=!0,l.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(u.current=!0,l.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[o?e:r,(0,D.z)((e=>(o||a(e),null==t?void 0:t(e))))]}(n,o,r),[O,T]=(0,i.useReducer)(H,{dataRef:(0,i.createRef)(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),P=(0,i.useRef)({static:!1,hold:!1}),L=(0,i.useRef)(null),N=(0,i.useRef)(null),A=(0,i.useRef)(null),k=(0,D.z)("string"==typeof l?(e,t)=>{let n=l;return(null==e?void 0:e[n])===(null==t?void 0:t[n])}:l),U=(0,i.useCallback)((e=>(0,x.E)(z.mode,{1:()=>y.some((t=>k(t,e))),0:()=>k(y,e)})),[y]),z=(0,i.useMemo)((()=>({...O,value:y,disabled:u,mode:d?1:0,orientation:v,compare:k,isSelected:U,optionsPropsRef:P,labelRef:L,buttonRef:N,optionsRef:A})),[y,u,d,O]);(0,p.e)((()=>{O.dataRef.current=z}),[z]),(0,S.O)([z.buttonRef,z.optionsRef],((e,t)=>{var n;T({type:1}),(0,C.sP)(t,C.tJ.Loose)||(e.preventDefault(),null==(n=z.buttonRef.current)||n.focus())}),0===z.listboxState);let M=(0,i.useMemo)((()=>({open:0===z.listboxState,disabled:u,value:y})),[z,u,y]),_=(0,D.z)((e=>{let t=z.options.find((t=>t.id===e));t&&Z(t.dataRef.current.value)})),F=(0,D.z)((()=>{if(null!==z.activeOptionIndex){let{dataRef:e,id:t}=z.options[z.activeOptionIndex];Z(e.current.value),T({type:2,focus:R.T.Specific,id:t})}})),V=(0,D.z)((()=>T({type:0}))),G=(0,D.z)((()=>T({type:1}))),Y=(0,D.z)(((e,t,n)=>e===R.T.Specific?T({type:2,focus:R.T.Specific,id:t,trigger:n}):T({type:2,focus:e,trigger:n}))),W=(0,D.z)(((e,t)=>(T({type:5,id:e,dataRef:t}),()=>T({type:6,id:e})))),K=(0,D.z)((e=>(T({type:7,id:e}),()=>T({type:7,id:null})))),Z=(0,D.z)((e=>(0,x.E)(z.mode,{0:()=>null==m?void 0:m(e),1(){let t=z.value.slice(),n=t.findIndex((t=>k(t,e)));return-1===n?t.push(e):t.splice(n,1),null==m?void 0:m(t)}}))),J=(0,D.z)((e=>T({type:3,value:e}))),q=(0,D.z)((()=>T({type:4}))),X=(0,i.useMemo)((()=>({onChange:Z,registerOption:W,registerLabel:K,goToOption:Y,closeListbox:G,openListbox:V,selectActiveOption:F,selectOption:_,search:J,clearSearch:q})),[]),ee={ref:h},te=(0,i.useRef)(null),ne=(0,c.G)();return(0,i.useEffect)((()=>{te.current&&void 0!==r&&ne.addEventListener(te.current,"reset",(()=>{Z(r)}))}),[te,Z]),i.createElement(B.Provider,{value:X},i.createElement($.Provider,{value:z},i.createElement(E.up,{value:(0,x.E)(z.listboxState,{0:E.ZM.Open,1:E.ZM.Closed})},null!=a&&null!=y&&I({[a]:y}).map((([e,t],n)=>i.createElement(w,{features:j.Hidden,ref:0===n?e=>{var t;te.current=null!=(t=null==e?void 0:e.closest("form"))?t:null}:void 0,...(0,g.oA)({key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:e,value:t})}))),(0,g.sY)({ourProps:ee,theirProps:f,slot:M,defaultTag:Q,name:"Listbox"}))))})),J=(0,g.yV)((function(e,t){var n;let r=(0,d.M)(),{id:a=`headlessui-listbox-button-${r}`,...o}=e,l=W("Listbox.Button"),u=Y("Listbox.Button"),s=(0,b.T)(l.buttonRef,t),p=(0,c.G)(),f=(0,D.z)((e=>{switch(e.key){case m.R.Space:case m.R.Enter:case m.R.ArrowDown:e.preventDefault(),u.openListbox(),p.nextFrame((()=>{l.value||u.goToOption(R.T.First)}));break;case m.R.ArrowUp:e.preventDefault(),u.openListbox(),p.nextFrame((()=>{l.value||u.goToOption(R.T.Last)}))}})),h=(0,D.z)((e=>{e.key===m.R.Space&&e.preventDefault()})),x=(0,D.z)((e=>{if((0,O.P)(e.currentTarget))return e.preventDefault();0===l.listboxState?(u.closeListbox(),p.nextFrame((()=>{var e;return null==(e=l.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),u.openListbox())})),y=v((()=>{if(l.labelId)return[l.labelId,a].join(" ")}),[l.labelId,a]),C=(0,i.useMemo)((()=>({open:0===l.listboxState,disabled:l.disabled,value:l.value})),[l]),E={ref:s,id:a,type:(0,T.f)(e,l.buttonRef),"aria-haspopup":"listbox","aria-controls":null==(n=l.optionsRef.current)?void 0:n.id,"aria-expanded":l.disabled?void 0:0===l.listboxState,"aria-labelledby":y,disabled:l.disabled,onKeyDown:f,onKeyUp:h,onClick:x};return(0,g.sY)({ourProps:E,theirProps:o,slot:C,defaultTag:"button",name:"Listbox.Button"})})),q=(0,g.yV)((function(e,t){let n=(0,d.M)(),{id:r=`headlessui-listbox-label-${n}`,...a}=e,o=W("Listbox.Label"),l=Y("Listbox.Label"),u=(0,b.T)(o.labelRef,t);(0,p.e)((()=>l.registerLabel(r)),[r]);let s=(0,D.z)((()=>{var e;return null==(e=o.buttonRef.current)?void 0:e.focus({preventScroll:!0})})),c=(0,i.useMemo)((()=>({open:0===o.listboxState,disabled:o.disabled})),[o]);return(0,g.sY)({ourProps:{ref:u,id:r,onClick:s},theirProps:a,slot:c,defaultTag:"label",name:"Listbox.Label"})})),X=(0,g.yV)((function(e,t){var n;let r=(0,d.M)(),{id:a=`headlessui-listbox-options-${r}`,...o}=e,l=W("Listbox.Options"),u=Y("Listbox.Options"),s=(0,b.T)(l.optionsRef,t),p=(0,c.G)(),f=(0,c.G)(),h=(0,E.oJ)(),O=null!==h?(h&E.ZM.Open)===E.ZM.Open:0===l.listboxState;(0,i.useEffect)((()=>{var e;let t=l.optionsRef.current;t&&0===l.listboxState&&t!==(null==(e=(0,k.r)(t))?void 0:e.activeElement)&&t.focus({preventScroll:!0})}),[l.listboxState,l.optionsRef]);let C=(0,D.z)((e=>{switch(f.dispose(),e.key){case m.R.Space:if(""!==l.searchQuery)return e.preventDefault(),e.stopPropagation(),u.search(e.key);case m.R.Enter:if(e.preventDefault(),e.stopPropagation(),null!==l.activeOptionIndex){let{dataRef:e}=l.options[l.activeOptionIndex];u.onChange(e.current.value)}0===l.mode&&(u.closeListbox(),(0,y.k)().nextFrame((()=>{var e;return null==(e=l.buttonRef.current)?void 0:e.focus({preventScroll:!0})})));break;case(0,x.E)(l.orientation,{vertical:m.R.ArrowDown,horizontal:m.R.ArrowRight}):return e.preventDefault(),e.stopPropagation(),u.goToOption(R.T.Next);case(0,x.E)(l.orientation,{vertical:m.R.ArrowUp,horizontal:m.R.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),u.goToOption(R.T.Previous);case m.R.Home:case m.R.PageUp:return e.preventDefault(),e.stopPropagation(),u.goToOption(R.T.First);case m.R.End:case m.R.PageDown:return e.preventDefault(),e.stopPropagation(),u.goToOption(R.T.Last);case m.R.Escape:return e.preventDefault(),e.stopPropagation(),u.closeListbox(),p.nextFrame((()=>{var e;return null==(e=l.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));case m.R.Tab:e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(u.search(e.key),f.setTimeout((()=>u.clearSearch()),350))}})),T=v((()=>{var e,t,n;return null!=(n=null==(e=l.labelRef.current)?void 0:e.id)?n:null==(t=l.buttonRef.current)?void 0:t.id}),[l.labelRef.current,l.buttonRef.current]),S=(0,i.useMemo)((()=>({open:0===l.listboxState})),[l]),j={"aria-activedescendant":null===l.activeOptionIndex||null==(n=l.options[l.activeOptionIndex])?void 0:n.id,"aria-multiselectable":1===l.mode||void 0,"aria-labelledby":T,"aria-orientation":l.orientation,id:a,onKeyDown:C,role:"listbox",tabIndex:0,ref:s};return(0,g.sY)({ourProps:j,theirProps:o,slot:S,defaultTag:"ul",features:K,visible:O,name:"Listbox.Options"})})),ee=(0,g.yV)((function(e,t){let n=(0,d.M)(),{id:r=`headlessui-listbox-option-${n}`,disabled:a=!1,value:o,...l}=e,u=W("Listbox.Option"),s=Y("Listbox.Option"),c=null!==u.activeOptionIndex&&u.options[u.activeOptionIndex].id===r,v=u.isSelected(o),h=(0,i.useRef)(null),x=(0,f.E)({disabled:a,value:o,domRef:h,get textValue(){var e,t;return null==(t=null==(e=h.current)?void 0:e.textContent)?void 0:t.toLowerCase()}}),m=(0,b.T)(t,h);(0,p.e)((()=>{if(0!==u.listboxState||!c||0===u.activationTrigger)return;let e=(0,y.k)();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=h.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[h,c,u.listboxState,u.activationTrigger,u.activeOptionIndex]),(0,p.e)((()=>s.registerOption(r,x)),[x,r]);let O=(0,D.z)((e=>{if(a)return e.preventDefault();s.onChange(o),0===u.mode&&(s.closeListbox(),(0,y.k)().nextFrame((()=>{var e;return null==(e=u.buttonRef.current)?void 0:e.focus({preventScroll:!0})})))})),C=(0,D.z)((()=>{if(a)return s.goToOption(R.T.Nothing);s.goToOption(R.T.Specific,r)})),E=(0,U.g)(),T=(0,D.z)((e=>E.update(e))),S=(0,D.z)((e=>{E.wasMoved(e)&&(a||c||s.goToOption(R.T.Specific,r,0))})),j=(0,D.z)((e=>{E.wasMoved(e)&&(a||c&&s.goToOption(R.T.Nothing))})),w=(0,i.useMemo)((()=>({active:c,selected:v,disabled:a})),[c,v,a]);return(0,g.sY)({ourProps:{id:r,ref:m,role:"option",tabIndex:!0===a?void 0:-1,"aria-disabled":!0===a||void 0,"aria-selected":v,disabled:void 0,onClick:O,onFocus:C,onPointerEnter:T,onMouseEnter:T,onPointerMove:S,onMouseMove:S,onPointerLeave:j,onMouseLeave:j},theirProps:l,slot:w,defaultTag:"li",name:"Listbox.Option"})})),te=Object.assign(Z,{Button:J,Label:q,Options:X,Option:ee});var ne=n(6747),re=function(){return re=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},re.apply(this,arguments)},ae={"bottom left":"oFXYv","bottom right":"Jl5DR","top right":"c68gv","top left":"aacUe"};function oe(e){var t=e.className,n=e.items,r=e.defaultValue,o=e.label,l=e.readonly,u=e.value,c=e.onChange,d=e.direction,p=[ae[void 0===d?"bottom right":d]];return(0,a.jsxs)(ne.U,re({gap:"8"},{children:[o&&o,(0,a.jsxs)(te,re({as:"div",className:(0,s.A)("Lsvjv",{},[t]),value:u,onChange:c,disabled:l},{children:[(0,a.jsx)(te.Button,re({className:"qrO2m"},{children:null!=u?u:r})),(0,a.jsx)(te.Options,re({className:(0,s.A)("V57wM",{},p)},{children:n.map((function(e){return(0,a.jsx)(te.Option,re({value:e.value,disabled:e.disabled,as:i.Fragment},{children:function(t){var n,r=t.active,o=t.selected;return(0,a.jsx)("li",re({className:(0,s.A)("mBjSA",(n={},n.lE7ga=r,n.wy24X=o,n.yYTJV=e.disabled,n))},{children:e.content}))}}),e.value)}))}))]}))]}))}var ie,le=[{value:r.Armenia,content:r.Armenia},{value:r.Belarus,content:r.Belarus},{value:r.Kazakhstan,content:r.Kazakhstan},{value:r.Russia,content:r.Russia},{value:r.Ukraine,content:r.Ukraine}],ue=(0,i.memo)((function(e){var t=e.className,n=e.value,r=e.onChange,l=e.readonly,u=e.direction,c=(0,o.$G)("translation").t,d=(0,i.useCallback)((function(e){null==r||r(e)}),[r]);return(0,a.jsx)(oe,{className:(0,s.A)("",{},[t]),value:n,label:c("Country"),onChange:d,items:le,readonly:l,direction:u})}));!function(e){e.RUB="RUB",e.EUR="EUR",e.USD="USD"}(ie||(ie={}));var se=[{value:ie.EUR,content:ie.EUR},{value:ie.RUB,content:ie.RUB},{value:ie.USD,content:ie.USD}],ce=(0,i.memo)((function(e){var t=e.className,n=e.value,r=e.onChange,l=e.readonly,u=e.direction,c=(0,o.$G)("translation").t,d=(0,i.useCallback)((function(e){null==r||r(e)}),[r]);return(0,a.jsx)(oe,{className:(0,s.A)("",{},[t]),value:n,label:c("currency"),onChange:d,items:se,readonly:l,direction:u})})),de=n(9245),pe=n(3083),fe=n(7559);const ve={ProfileCard:"wW9jg",editForm:"U9LGH",loading:"t07Zx",error:"i5YK3",avatarWrapper:"bEFNS"};var he,be=function(){return be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},be.apply(this,arguments)},ge=function(e){var t,n=e.className,r=e.data,i=e.isLoading,u=e.error,c=e.readonly,d=e.onChangeFirst,p=e.onChangeLastname,f=e.onChangeAge,v=e.onChangeCity,h=e.onChangeUsername,b=e.onChangeAvatar,g=e.onChangeCountry,x=e.onChangeCurrency,y=(0,o.$G)("profile").t,m=((t={})[ve.editForm]=!c,t);return i?(0,a.jsx)(ne.g,be({max:!0,justify:"center",align:"center",className:(0,s.A)(ve.ProfileCard,{},[n,ve.loading])},{children:(0,a.jsx)(fe.a,{})})):u?(0,a.jsx)(ne.g,be({max:!0,className:(0,s.A)(ve.ProfileCard,{},[n,ve.error])},{children:(0,a.jsx)(l.xv,{theme:l.lg.ERROR,title:y("profile error"),text:y("profile error text"),align:l.PH.CENTER})})):(0,a.jsxs)(ne.g,be({gap:"16",max:!0,className:(0,s.A)(ve.ProfileCard,m,[n])},{children:[(null==r?void 0:r.avatar)&&(0,a.jsx)(ne.U,be({justify:"center",className:ve.avatarWrapper},{children:(0,a.jsx)(de.q,{src:r.avatar})})),(0,a.jsx)(pe.I,{value:null==r?void 0:r.first,placeholder:y("input firstname"),readonly:c,onChange:d,"data-testid":"ProfileCard.firstname"}),(0,a.jsx)(pe.I,{className:ve.input,value:null==r?void 0:r.lastname,placeholder:y("input lastname"),readonly:c,onChange:p,"data-testid":"ProfileCard.lastname"}),(0,a.jsx)(pe.I,{className:ve.input,value:null==r?void 0:r.age,placeholder:y("input age"),readonly:c,onChange:f}),(0,a.jsx)(pe.I,{className:ve.input,value:null==r?void 0:r.city,placeholder:y("input city"),readonly:c,onChange:v}),(0,a.jsx)(pe.I,{className:ve.input,value:null==r?void 0:r.username,placeholder:y("input username"),readonly:c,onChange:h}),(0,a.jsx)(pe.I,{className:ve.input,value:null==r?void 0:r.avatar,placeholder:y("input avatar"),readonly:c,onChange:b}),(0,a.jsx)(ue,{className:ve.input,value:null==r?void 0:r.country,readonly:c,onChange:g,direction:"top right"}),(0,a.jsx)(ce,{className:ve.input,value:null==r?void 0:r.currency,readonly:c,onChange:x,direction:"top right"})]}))},xe=n(4617),ye=n(8381),me=n(9553),Re=n(4268),Oe=(0,Re.hg)("profile/fetchProfileData",(function(e,t){return n=void 0,r=void 0,o=function(){var n,r,a,o;return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}}(this,(function(i){switch(i.label){case 0:n=t.extra,r=t.rejectWithValue,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.api.get("/profile/".concat(e))];case 2:if(!(a=i.sent()).data)throw new Error;return[2,a.data];case 3:return o=i.sent(),console.log(o),[2,r("error")];case 4:return[2]}}))},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{u(o.next(e))}catch(e){t(e)}}function l(e){try{u(o.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(i,l)}u((o=o.apply(n,r||[])).next())}));var n,r,a,o})),Ce=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.error},Ee=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.form},Te=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.isLoading},Se=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.readonly},je=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.validateErrors};!function(e){e.INCORRECT_USER_DATA="INCORRECT_USER_DATA",e.INCORRECT_AGE="INCORRECT_AGE",e.INCORRECT_CITY="INCORRECT_CITY",e.NO_DATA="NO_DATA",e.SERVER_ERROR="SERVER_ERROR"}(he||(he={}));var we=(0,Re.hg)("profile/updateProfileData",(function(e,t){return n=void 0,r=void 0,o=function(){var e,n,r,a,o,i,l;return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}}(this,(function(u){switch(u.label){case 0:if(e=t.extra,n=t.rejectWithValue,r=t.getState,a=Ee(r()),(o=function(e){if(!e)return[he.NO_DATA];var t=e.first,n=e.lastname,r=e.age,a=e.city,o=[];return t&&n||o.push(he.INCORRECT_USER_DATA),(!r||r<18||r>100)&&o.push(he.INCORRECT_AGE),a||o.push(he.INCORRECT_CITY),o}(a)).length)return[2,n(o)];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,e.api.put("/profile/".concat(null==a?void 0:a.id),a)];case 2:if(!(i=u.sent()).data)throw new Error;return[2,i.data];case 3:return l=u.sent(),console.log(l),[2,n([he.SERVER_ERROR])];case 4:return[2]}}))},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{u(o.next(e))}catch(e){t(e)}}function l(e){try{u(o.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(i,l)}u((o=o.apply(n,r||[])).next())}));var n,r,a,o})),Ie=function(){return Ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ie.apply(this,arguments)},Pe=(0,Re.oM)({name:"profile",initialState:{data:void 0,isLoading:!1,readonly:!0,error:void 0},reducers:{setReadonly:function(e,t){e.readonly=t.payload},cancelEdit:function(e){e.readonly=!0,e.form=e.data,e.validateErrors=void 0},updateProfile:function(e,t){e.form=Ie(Ie({},e.form),t.payload)}},extraReducers:function(e){e.addCase(Oe.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(Oe.fulfilled,(function(e,t){e.isLoading=!1,e.data=t.payload,e.form=t.payload})).addCase(Oe.rejected,(function(e,t){e.isLoading=!1,e.error=t.payload})).addCase(we.pending,(function(e){e.validateErrors=void 0,e.isLoading=!0})).addCase(we.fulfilled,(function(e,t){e.isLoading=!1,e.data=t.payload,e.form=t.payload,e.readonly=!0,e.validateErrors=void 0})).addCase(we.rejected,(function(e,t){e.isLoading=!1,e.validateErrors=t.payload}))}}),Le=Pe.actions,Ne=Pe.reducer,Ae=n(577),ke=n(7553),De=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.data},Ue=function(){return Ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ue.apply(this,arguments)},ze=function(e){e.className;var t=(0,o.$G)("profile").t,n=(0,u.v9)(De),r=(0,u.v9)(Ae.m5),s=(null==n?void 0:n.id)===(null==r?void 0:r.id),c=(0,u.v9)(Se),d=(0,xe.T)(),p=(0,i.useCallback)((function(){d(Le.setReadonly(!1))}),[d]),f=(0,i.useCallback)((function(){d(Le.cancelEdit())}),[d]),v=(0,i.useCallback)((function(){d(we())}),[d]);return(0,a.jsxs)(ne.U,Ue({justify:"between",max:!0},{children:[(0,a.jsx)(l.xv,{title:t("profile page")}),s&&(0,a.jsx)(ne.U,{children:c?(0,a.jsx)(ke.zx,Ue({theme:ke.Wu.OUTLINE,onClick:p,"data-testid":"EditableProfileCardHeader.EditButton"},{children:t("edit")})):(0,a.jsxs)(ne.U,Ue({gap:"8"},{children:[(0,a.jsx)(ke.zx,Ue({theme:ke.Wu.OUTLINE,onClick:v,"data-testid":"EditableProfileCardHeader.SaveButton"},{children:t("Save")})),(0,a.jsx)(ke.zx,Ue({theme:ke.Wu.OUTLINE_RED,onClick:f,"data-testid":"EditableProfileCardHeader.CancelButton"},{children:t("Cancel")}))]}))})]}))},Me=function(){return Me=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Me.apply(this,arguments)},_e={profile:Ne},Fe=(0,i.memo)((function(e){var t,n=e.className,r=e.id,c=(0,o.$G)("profile").t,d=(0,xe.T)(),p=(0,u.v9)(Ee),f=(0,u.v9)(Te),v=(0,u.v9)(Ce),h=(0,u.v9)(Se),b=(0,u.v9)(je);(0,ye.Q)((function(){r&&d(Oe(r))}));var g=((t={})[he.INCORRECT_AGE]=c("incorrect age"),t[he.INCORRECT_CITY]=c("incorrect  city"),t[he.INCORRECT_USER_DATA]=c("incorrect user data"),t[he.NO_DATA]=c("incorrect data"),t[he.SERVER_ERROR]=c("incorrect server error"),t),x=(0,i.useCallback)((function(e){d(Le.updateProfile({first:e||""}))}),[d]),y=(0,i.useCallback)((function(e){d(Le.updateProfile({lastname:e||""}))}),[d]),m=(0,i.useCallback)((function(e){d(Le.updateProfile({age:Number((null==e?void 0:e.replace(/\D/gi,""))||0)}))}),[d]),R=(0,i.useCallback)((function(e){d(Le.updateProfile({city:e||""}))}),[d]),O=(0,i.useCallback)((function(e){d(Le.updateProfile({username:e||""}))}),[d]),C=(0,i.useCallback)((function(e){d(Le.updateProfile({avatar:e||""}))}),[d]),E=(0,i.useCallback)((function(e){d(Le.updateProfile({currency:e}))}),[d]),T=(0,i.useCallback)((function(e){d(Le.updateProfile({country:e}))}),[d]);return(0,a.jsx)(me.W,Me({reducers:_e},{children:(0,a.jsxs)(ne.g,Me({gap:"16",max:!0,className:(0,s.A)("",{},[n])},{children:[(0,a.jsx)(ze,{}),(null==b?void 0:b.length)&&b.map((function(e){return(0,a.jsx)(l.xv,{theme:l.lg.ERROR,text:g[e],"data-testid":"EditableProfileCard.Error"},e)})),(0,a.jsx)(ge,{data:p,isLoading:f,error:v,readonly:h,onChangeFirst:x,onChangeLastname:y,onChangeAge:m,onChangeCity:R,onChangeUsername:O,onChangeAvatar:C,onChangeCurrency:E,onChangeCountry:T})]}))}))})),Ve=n(6974),Ge=n(115),Be=function(){return Be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Be.apply(this,arguments)};const Ye=function(e){var t=e.className,n=(0,o.$G)("profile").t,r=(0,Ve.UO)().id;return r?(0,a.jsx)(Ge.T,Be({className:(0,s.A)("",{},[t])},{children:(0,a.jsx)(ne.g,Be({gap:"16"},{children:(0,a.jsx)(Fe,{id:r})}))})):(0,a.jsx)(l.xv,{text:n("profile not found")})}},9553:(e,t,n)=>{n.d(t,{W:()=>i});var r=n(5893),a=n(7294),o=n(3942),i=function(e){var t=e.children,n=e.reducers,i=e.removeAfterUnmount,l=void 0===i||i,u=(0,o.oR)(),s=(0,o.I0)();return(0,a.useEffect)((function(){var e=u.reducerManager.getReducerMap();return Object.entries(n).forEach((function(t){var n=t[0],r=t[1];e[n]||(u.reducerManager.add(n,r),s({type:"@INIT ".concat(n," reducer")}))})),function(){l&&Object.entries(n).forEach((function(e){var t=e[0];e[1],u.reducerManager.remove(t),s({type:"@DESTROY ".concat(t," reducer")})}))}}),[]),(0,r.jsx)(r.Fragment,{children:t})}},3083:(e,t,n)=>{n.d(t,{I:()=>u});var r=n(5893),a=n(3838),o=n(7294);var i=n(6747),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)},u=(0,o.memo)((function(e){var t,n=e.className,o=e.value,u=void 0===o?"":o,s=e.onChange,c=e.type,d=void 0===c?"text":c,p=e.placeholder,f=e.readonly,v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["className","value","onChange","type","placeholder","readonly"]),h=((t={}).fTN1P=f,t);return(0,r.jsxs)(i.g,l({gap:"4",max:!0,className:(0,a.A)("LuFDU",h,[n])},{children:[(0,r.jsx)("div",{children:p}),(0,r.jsx)("input",l({type:d,onChange:function(e){null==s||s(e.target.value)},className:"X8EVb",placeholder:p,value:u,readOnly:f},v))]}))}))}}]);