"use strict";(self.webpackChunkreact_middle=self.webpackChunkreact_middle||[]).push([[534],{4534:(e,s,a)=>{a.r(s),a.d(s,{default:()=>M});var t=a(7294),i=a(9887),r=a(6974),l=a(6954),n=a(3942);const c=e=>e.ArticleDetailsPages?.comments.isLoading||!1;var d=a(4268),m=a(8456),o=a(1397),x=a(5321);const h=(0,d.hg)("articleDetails/addCommentForArticle",(async(e,s)=>{const{extra:a,rejectWithValue:t,getState:i,dispatch:r}=s,l=(0,x.m5)(i()),n=(0,o.wq)(i());if(!e||!l||!n)return t("no data");try{const s=await a.api.post("/comments",{articleId:n.id,text:e,userId:l.id});if(!s.data)throw new Error("No data");return r((0,m.T)(n.id)),s.data}catch(e){return console.log(e),t("error")}}));var j=a(4300),u=a(9372),g=a(4187),N=a(516),v=a(6794),p=a(7050),A=a(9457),C=a(8699);const L={CommentCard:"D_1ld",header:"MKn3Z",username:"hXMDF",loading:"SrYg_"};var b=a(5893);const k=(0,t.memo)((e=>{const{className:s,comments:a,isLoading:t}=e;return t?(0,b.jsxs)("div",{className:(0,g.A)(L.CommentCard,{},[s,L.loading]),children:[(0,b.jsxs)("div",{className:L.header,children:[(0,b.jsx)(p.O,{width:30,height:30,border:"50%",className:L.avatar}),(0,b.jsx)(p.O,{height:16,width:100})]}),(0,b.jsx)(p.O,{className:L.text,width:"100%",height:50})]}):a?(0,b.jsxs)(A.g,{gap:"8",max:!0,className:(0,g.A)(L.CommentCard,{},[s]),children:[(0,b.jsxs)(N.F,{to:`${u.h.profile}${a.user.id}`,className:L.header,children:[a.user.avatar?(0,b.jsx)(v.q,{size:30,src:a.user.avatar,className:L.avatar}):null,(0,b.jsx)(C.xv,{title:a.user.username})]}),(0,b.jsx)(C.xv,{className:L.text,text:a.text})]}):null})),w=(0,t.memo)((e=>{const{className:s,isLoading:a,comments:t}=e,{t:r}=(0,i.$G)("articles_details");return a?(0,b.jsxs)(A.g,{gap:"16",max:!0,className:(0,g.A)("",{},[s]),children:[(0,b.jsx)(k,{isLoading:!0}),(0,b.jsx)(k,{isLoading:!0}),(0,b.jsx)(k,{isLoading:!0})]}):(0,b.jsx)(A.g,{gap:"16",max:!0,className:(0,g.A)("",{},[s]),children:t?.length?t.map((e=>(0,b.jsx)(k,{isLoading:a,comments:e},e.id))):(0,b.jsx)(C.xv,{text:r("no comments")})})})),_=(0,t.lazy)((()=>a.e(62).then(a.bind(a,2062))));var f=a(9169),y=a(9728),$=a(5769);const z=(0,t.memo)((e=>{const{className:s,id:a}=e,{t:r}=(0,i.$G)("articles_details"),l=(0,f.T)(),d=(0,n.v9)(c),o=(0,n.v9)(j.l.selectAll);(0,y.Q)((()=>{l((0,m.T)(a))}));const x=(0,t.useCallback)((e=>{l(h(e))}),[l]);return(0,b.jsxs)(A.g,{gap:"16",max:!0,className:(0,g.A)("",{},[s]),children:[(0,b.jsx)(C.xv,{size:C.yH.L,title:r("Comment title")}),(0,b.jsx)(t.Suspense,{fallback:(0,b.jsx)($.a,{}),children:(0,b.jsx)(_,{onSendComment:x})}),(0,b.jsx)(w,{comments:o,isLoading:d})]})}));var D=a(22),T=a(4156);const G=(0,t.memo)((e=>{const{className:s}=e,{t:a}=(0,i.$G)("articles_details"),l=(0,r.s0)(),c=(0,n.v9)(D.P),d=(0,n.v9)(o.wq),m=(0,t.useCallback)((()=>{l(u.h.articles)}),[l]),x=(0,t.useCallback)((()=>{l(`${u.h.article_details}${d?.id}/edit`)}),[d?.id,l]);return(0,b.jsxs)(A.U,{justify:"between",max:!0,className:(0,g.A)("",{},[s]),children:[(0,b.jsx)(T.zx,{theme:T.Wu.OUTLINE,onClick:m,children:a("back to list")}),c&&(0,b.jsx)(T.zx,{theme:T.Wu.OUTLINE,onClick:x,children:a("Edit")})]})})),O=a(6628).p.injectEndpoints({endpoints:e=>({getArticleRecommendationsList:e.query({query:e=>({url:"/articles",params:{_limit:e}})})})}).useGetArticleRecommendationsListQuery,q=(0,t.memo)((e=>{const{className:s}=e,{t:a}=(0,i.$G)("articles_details"),{isLoading:t,error:r,data:l}=O(4);return t||r||!l?null:(0,b.jsxs)(A.g,{gap:"8",className:(0,g.A)("",{},[s]),children:[(0,b.jsx)(C.xv,{size:C.yH.L,title:a("Recommended")}),(0,b.jsx)(o.wD,{articles:l,target:"_blank"})]})})),E=(0,t.lazy)((()=>a.e(785).then(a.bind(a,5785))));var I=a(8205),U=a(3468);const S="adu8f",W={ArticleDetailsPages:l.M},F=e=>{const{className:s}=e,{t:a}=(0,i.$G)("articles_details"),{id:t}=(0,r.UO)();return t?(0,b.jsx)(I.W,{reducers:W,removeAfterUnmount:!0,children:(0,b.jsx)(U.T,{className:(0,g.A)(S,{},[s]),children:(0,b.jsxs)(A.g,{gap:"16",max:!0,children:[(0,b.jsx)(G,{}),(0,b.jsx)(o.D0,{id:t}),(0,b.jsx)(E,{articleId:t}),(0,b.jsx)(q,{}),(0,b.jsx)(z,{id:t})]})})}):(0,b.jsx)(U.T,{className:(0,g.A)(S,{},[s]),children:a("articles not found")})},M=(0,t.memo)(F)}}]);