"use strict";(self.webpackChunkreact_middle=self.webpackChunkreact_middle||[]).push([[534],{4534:(e,s,a)=>{a.r(s),a.d(s,{default:()=>F});var t=a(7294),i=a(9887),r=a(6974),l=a(3879),n=a(4187),c=a(9457),d=a(1715);const m=a(6628).p.injectEndpoints({endpoints:e=>({getArticleRecommendationsList:e.query({query:e=>({url:"/articles",params:{_limit:e}})})})}).useGetArticleRecommendationsListQuery;var o=a(5893);const x=(0,t.memo)((e=>{const{className:s}=e,{t:a}=(0,i.$G)("articles_details"),{isLoading:t,error:r,data:x}=m(4);return t||r||!x?null:(0,o.jsxs)(c.g,{gap:"8",className:(0,n.A)("",{},[s]),children:[(0,o.jsx)(d.xv,{size:d.yH.L,title:a("Recommended")}),(0,o.jsx)(l.wD,{articles:x,target:"_blank"})]})}));var h=a(1547),j=a(8205),u=a(3468),g=a(3942),N=a(9372),v=a(5255);const p=(0,t.memo)((e=>{const{className:s}=e,{t:a}=(0,i.$G)("articles_details"),d=(0,r.s0)(),m=(0,g.v9)(h.PB),x=(0,g.v9)(l.wq),j=(0,t.useCallback)((()=>{d(N.h.articles)}),[d]),u=(0,t.useCallback)((()=>{d(`${N.h.article_details}${x?.id}/edit`)}),[x?.id,d]);return(0,o.jsxs)(c.U,{justify:"between",max:!0,className:(0,n.A)("",{},[s]),children:[(0,o.jsx)(v.zx,{theme:v.Wu.OUTLINE,onClick:j,children:a("back to list")}),m&&(0,o.jsx)(v.zx,{theme:v.Wu.OUTLINE,onClick:u,children:a("Edit")})]})})),A="adu8f",C=(0,t.lazy)((()=>a.e(62).then(a.bind(a,2062))));var L=a(3312),b=a(2949),k=a(6897);const w={CommentCard:"D_1ld",header:"MKn3Z",username:"hXMDF",loading:"SrYg_"},_=(0,t.memo)((e=>{const{className:s,comments:a,isLoading:t}=e;return t?(0,o.jsxs)("div",{className:(0,n.A)(w.CommentCard,{},[s,w.loading]),children:[(0,o.jsxs)("div",{className:w.header,children:[(0,o.jsx)(L.O,{width:30,height:30,border:"50%",className:w.avatar}),(0,o.jsx)(L.O,{height:16,width:100})]}),(0,o.jsx)(L.O,{className:w.text,width:"100%",height:50})]}):a?(0,o.jsxs)(c.g,{gap:"8",max:!0,className:(0,n.A)(w.CommentCard,{},[s]),children:[(0,o.jsxs)(k.F,{to:`${N.h.profile}${a.user.id}`,className:w.header,children:[a.user.avatar?(0,o.jsx)(b.q,{size:30,src:a.user.avatar,className:w.avatar}):null,(0,o.jsx)(d.xv,{title:a.user.username})]}),(0,o.jsx)(d.xv,{className:w.text,text:a.text})]}):null})),f=(0,t.memo)((e=>{const{className:s,isLoading:a,comments:t}=e,{t:r}=(0,i.$G)("articles_details");return a?(0,o.jsxs)(c.g,{gap:"16",max:!0,className:(0,n.A)("",{},[s]),children:[(0,o.jsx)(_,{isLoading:!0}),(0,o.jsx)(_,{isLoading:!0}),(0,o.jsx)(_,{isLoading:!0})]}):(0,o.jsx)(c.g,{gap:"16",max:!0,className:(0,n.A)("",{},[s]),children:t?.length?t.map((e=>(0,o.jsx)(_,{isLoading:a,comments:e},e.id))):(0,o.jsx)(d.xv,{text:r("no comments")})})}));var y=a(9169),$=a(9728),z=a(3212);const D=e=>e.ArticleDetailsPages?.comments.isLoading||!1;var T=a(4268),G=a(5321),O=a(8456);const q=(0,T.hg)("articleDetails/addCommentForArticle",(async(e,s)=>{const{extra:a,rejectWithValue:t,getState:i,dispatch:r}=s,n=(0,G.m5)(i()),c=(0,l.wq)(i());if(!e||!n||!c)return t("no data");try{const s=await a.api.post("/comments",{articleId:c.id,text:e,userId:n.id});if(!s.data)throw new Error("No data");return r((0,O.T)(c.id)),s.data}catch(e){return console.log(e),t("error")}}));var E=a(4300);const I=(0,t.memo)((e=>{const{className:s,id:a}=e,{t:r}=(0,i.$G)("articles_details"),l=(0,y.T)(),m=(0,g.v9)(D),x=(0,g.v9)(E.l.selectAll);(0,$.Q)((()=>{l((0,O.T)(a))}));const h=(0,t.useCallback)((e=>{l(q(e))}),[l]);return(0,o.jsxs)(c.g,{gap:"16",max:!0,className:(0,n.A)("",{},[s]),children:[(0,o.jsx)(d.xv,{size:d.yH.L,title:r("Comment title")}),(0,o.jsx)(t.Suspense,{fallback:(0,o.jsx)(z.a,{}),children:(0,o.jsx)(C,{onSendComment:h})}),(0,o.jsx)(f,{comments:x,isLoading:m})]})})),U=(0,t.lazy)((()=>a.e(798).then(a.bind(a,7798)))),S={ArticleDetailsPages:h.M7},W=e=>{const{className:s}=e,{t:a}=(0,i.$G)("articles_details"),{id:t}=(0,r.UO)();return t?(0,o.jsx)(j.W,{reducers:S,removeAfterUnmount:!0,children:(0,o.jsx)(u.T,{className:(0,n.A)(A,{},[s]),children:(0,o.jsxs)(c.g,{gap:"16",max:!0,children:[(0,o.jsx)(p,{}),(0,o.jsx)(l.D0,{id:t}),(0,o.jsx)(U,{articleId:t}),(0,o.jsx)(x,{}),(0,o.jsx)(I,{id:t})]})})}):(0,o.jsx)(u.T,{className:(0,n.A)(A,{},[s]),children:a("articles not found")})},F=(0,t.memo)(W)}}]);