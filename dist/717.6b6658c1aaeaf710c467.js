"use strict";(self.webpackChunkreact_middle=self.webpackChunkreact_middle||[]).push([[717],{6717:(e,n,a)=>{a.r(n),a.d(n,{default:()=>K});var r=a(5893),t=a(9558),o=a(9887),l=a(2292),i=a(5742),c=a(7294),u=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.form},s=a(7168),d=(0,s.hg)("profile/updateProfileData",(function(e,n){return a=void 0,r=void 0,o=function(){var e,a,r,t,o;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(a=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){l.label=i[1];break}if(6===i[0]&&l.label<t[1]){l.label=t[1],t=i;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(i);break}t[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{a=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(l){switch(l.label){case 0:e=n.extra,a=n.rejectWithValue,r=n.getState,t=u(r()),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,e.api.put("/profile",t)];case 2:return[2,l.sent().data];case 3:return o=l.sent(),console.log(o),[2,a("error")];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function l(e){try{c(o.next(e))}catch(e){n(e)}}function i(e){try{c(o.throw(e))}catch(e){n(e)}}function c(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(l,i)}c((o=o.apply(a,r||[])).next())}));var a,r,t,o})),f=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.error},v=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.isLoading},h=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.readonly},p=(0,s.hg)("profile/fetchProfileData",(function(e,n){return a=void 0,r=void 0,o=function(){var e,a,r;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(a=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){l.label=i[1];break}if(6===i[0]&&l.label<t[1]){l.label=t[1],t=i;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(i);break}t[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{a=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(t){switch(t.label){case 0:e=n.extra,a=n.rejectWithValue,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.api.get("/profile")];case 2:return[2,t.sent().data];case 3:return r=t.sent(),console.log(r),[2,a("error")];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function l(e){try{c(o.next(e))}catch(e){n(e)}}function i(e){try{c(o.throw(e))}catch(e){n(e)}}function c(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(l,i)}c((o=o.apply(a,r||[])).next())}));var a,r,t,o})),y=function(){return y=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},y.apply(this,arguments)},m=(0,s.oM)({name:"profile",initialState:{data:void 0,isLoading:!1,readonly:!0,error:void 0},reducers:{setReadonly:function(e,n){e.readonly=n.payload},cancelEdit:function(e){e.readonly=!0,e.form=e.data},updateProfile:function(e,n){e.form=y(y({},e.form),n.payload)}},extraReducers:function(e){e.addCase(p.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(p.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload})).addCase(p.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload})).addCase(d.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(d.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload,e.readonly=!0})).addCase(d.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload}))}}),g=m.actions,b=m.reducer,x=a(8538),j=a(8855),C=a(2455);var N,O=(0,c.memo)((function(e){var n=e.className,a=e.src,o=e.alt,l=void 0===o?"":o,i=e.size,u=void 0===i?150:i,s=(0,c.useMemo)((function(){return{width:u,height:u}}),[u]);return(0,r.jsx)("img",{className:(0,t.A)("ZqPdw",{},[n]),src:a,style:s,alt:l})}));!function(e){e.Russia="Russia",e.Belarus="Belarus",e.Ukraine="Ukraine",e.Kazakhstan="Kazahstan",e.Armenia="Armenia"}(N||(N={}));var k,w=function(){return w=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},w.apply(this,arguments)},P=(0,c.memo)((function(e){var n=e.className,a=e.label,o=e.options,l=e.onChange,i=e.value,u=e.readonly,s=(0,c.useMemo)((function(){return null==o?void 0:o.map((function(e){return(0,r.jsx)("option",w({className:"JkXz9",value:e.value},{children:e.content}),e.value)}))}),[o]);return(0,r.jsxs)("div",w({className:(0,t.A)("cidfd",{},[n])},{children:[a&&(0,r.jsx)("div",w({className:"G1uuf"},{children:"".concat(a)})),(0,r.jsx)("select",w({disabled:u,className:"VOKOu",value:i,onChange:function(e){l&&l(e.target.value)}},{children:s}))]}))})),R=[{value:N.Armenia,content:N.Armenia},{value:N.Belarus,content:N.Belarus},{value:N.Kazakhstan,content:N.Kazakhstan},{value:N.Russia,content:N.Russia},{value:N.Ukraine,content:N.Ukraine}],E=(0,c.memo)((function(e){var n=e.className,a=e.value,l=e.onChange,i=e.readonly,u=(0,o.$G)("translation").t,s=(0,c.useCallback)((function(e){null==l||l(e)}),[l]);return(0,r.jsx)(P,{className:(0,t.A)("",{},[n]),value:a,label:u("Country"),onChange:s,options:R,readonly:i})}));!function(e){e.RUB="RUB",e.EUR="EUR",e.USD="USD"}(k||(k={}));var U=[{value:k.EUR,content:k.EUR},{value:k.RUB,content:k.RUB},{value:k.USD,content:k.USD}],A=(0,c.memo)((function(e){var n=e.className,a=e.value,l=e.onChange,i=e.readonly,u=(0,o.$G)("translation").t,s=(0,c.useCallback)((function(e){null==l||l(e)}),[l]);return(0,r.jsx)(P,{className:(0,t.A)("",{},[n]),value:a,label:u("currency"),onChange:s,options:U,readonly:i})}));const L="wW9jg",T="ZTyX8";var I=function(){return I=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},I.apply(this,arguments)},B=function(e){var n,a=e.className,l=e.data,i=e.isLoading,c=e.error,u=e.readonly,s=e.onChangeFirst,d=e.onChangeLastname,f=e.onChangeAge,v=e.onChangeCity,h=e.onChangeUsername,p=e.onChangeAvatar,y=e.onChangeCountry,m=e.onChangeCurrency,g=(0,o.$G)("profile").t,b=((n={}).U9LGH=!u,n);return i?(0,r.jsx)("div",I({className:(0,t.A)(L,{},[a,"t07Zx"])},{children:(0,r.jsx)(C.a,{})})):c?(0,r.jsx)("div",I({className:(0,t.A)(L,{},[a,"i5YK3"])},{children:(0,r.jsx)(j.xv,{theme:j.lg.ERROR,title:g("profile error"),text:g("profile error text"),align:j.PH.CENTER})})):(0,r.jsxs)("div",I({className:(0,t.A)(L,b,[a])},{children:[(null==l?void 0:l.avatar)&&(0,r.jsx)("div",I({className:"bEFNS"},{children:(0,r.jsx)(O,{src:l.avatar})})),(0,r.jsx)(x.I,{value:null==l?void 0:l.first,placeholder:g("input firstname"),readonly:u,onChange:s}),(0,r.jsx)(x.I,{className:T,value:null==l?void 0:l.lastname,placeholder:g("input lastname"),readonly:u,onChange:d}),(0,r.jsx)(x.I,{className:T,value:null==l?void 0:l.age,placeholder:g("input age"),readonly:u,onChange:f}),(0,r.jsx)(x.I,{className:T,value:null==l?void 0:l.city,placeholder:g("input city"),readonly:u,onChange:v}),(0,r.jsx)(x.I,{className:T,value:null==l?void 0:l.username,placeholder:g("input username"),readonly:u,onChange:h}),(0,r.jsx)(x.I,{className:T,value:null==l?void 0:l.avatar,placeholder:g("input avatar"),readonly:u,onChange:p}),(0,r.jsx)(E,{className:T,value:null==l?void 0:l.country,readonly:u,onChange:y}),(0,r.jsx)(A,{className:T,value:null==l?void 0:l.currency,readonly:u,onChange:m})]}))},S=a(9704),D=a(2055);const F={header:"BhPkj",editBtn:"vP5lJ",cancelEditBtn:"kL8mM"};var G=function(){return G=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},G.apply(this,arguments)},z=function(e){var n=e.className,a=(0,o.$G)("profile").t,l=(0,S.v9)(h),u=(0,i.T)(),s=(0,c.useCallback)((function(){u(g.setReadonly(!1))}),[u]),f=(0,c.useCallback)((function(){u(g.cancelEdit())}),[u]),v=(0,c.useCallback)((function(){u(d())}),[u]);return(0,r.jsx)("div",G({className:(0,t.A)(F.ProfilePageHeader,{},[n])},{children:(0,r.jsxs)("div",G({className:F.header},{children:[(0,r.jsx)(j.xv,{title:a("profile page")}),l?(0,r.jsx)(D.zx,G({theme:D.Wu.OUTLINE,className:F.editBtn,onClick:s},{children:a("edit")})):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D.zx,G({theme:D.Wu.OUTLINE,className:F.editBtn,onClick:v},{children:a("Save")})),(0,r.jsx)(D.zx,G({theme:D.Wu.OUTLINE_RED,className:F.cancelEditBtn,onClick:f},{children:a("Cancel")}))]})]}))}))},M=function(){return M=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},M.apply(this,arguments)},W={profile:b};const K=function(e){var n=e.className,a=((0,o.$G)().t,(0,S.v9)(u)),s=(0,S.v9)(v),d=(0,S.v9)(f),y=(0,i.T)(),m=(0,S.v9)(h);(0,c.useEffect)((function(){y(p())}),[y]);var b=(0,c.useCallback)((function(e){y(g.updateProfile({first:e||""}))}),[y]),x=(0,c.useCallback)((function(e){y(g.updateProfile({lastname:e||""}))}),[y]),j=(0,c.useCallback)((function(e){y(g.updateProfile({age:Number((null==e?void 0:e.replace(/\D/gi,""))||0)}))}),[y]),C=(0,c.useCallback)((function(e){y(g.updateProfile({city:e||""}))}),[y]),N=(0,c.useCallback)((function(e){y(g.updateProfile({username:e||""}))}),[y]),O=(0,c.useCallback)((function(e){y(g.updateProfile({avatar:e||""}))}),[y]),k=(0,c.useCallback)((function(e){y(g.updateProfile({currency:e}))}),[y]),w=(0,c.useCallback)((function(e){y(g.updateProfile({country:e}))}),[y]);return(0,r.jsx)(l.W,M({reducers:W,removeAfterUnmount:!0},{children:(0,r.jsxs)("div",M({className:(0,t.A)("",{},[n])},{children:[(0,r.jsx)(z,{}),(0,r.jsx)(B,{data:a,isLoading:s,error:d,readonly:m,onChangeFirst:b,onChangeLastname:x,onChangeAge:j,onChangeCity:C,onChangeUsername:N,onChangeAvatar:O,onChangeCurrency:k,onChangeCountry:w})]}))}))}},2292:(e,n,a)=>{a.d(n,{W:()=>l});var r=a(5893),t=a(7294),o=a(9704),l=function(e){var n=e.children,a=e.reducers,l=e.removeAfterUnmount,i=(0,o.oR)(),c=(0,o.I0)();return(0,t.useEffect)((function(){return Object.entries(a).forEach((function(e){var n=e[0],a=e[1];i.reducerManager.add(n,a),c({type:"@INIT ".concat(n," reducer")})})),function(){l&&Object.entries(a).forEach((function(e){var n=e[0];e[1],i.reducerManager.remove(n),c({type:"@DESTROY ".concat(n," reducer")})}))}}),[]),(0,r.jsx)(r.Fragment,{children:n})}},5742:(e,n,a)=>{a.d(n,{T:()=>r});var r=a(9704).I0},8538:(e,n,a)=>{a.d(n,{I:()=>i});var r=a(5893),t=a(9558),o=a(7294);var l=function(){return l=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},l.apply(this,arguments)},i=(0,o.memo)((function(e){var n,a=e.className,o=e.value,i=e.onChange,c=e.type,u=void 0===c?"text":c,s=e.placeholder,d=e.readonly,f=function(e,n){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)n.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(e,r[t])&&(a[r[t]]=e[r[t]])}return a}(e,["className","value","onChange","type","placeholder","readonly"]),v=((n={}).fTN1P=d,n);return(0,r.jsxs)("div",l({className:(0,t.A)("LuFDU",v,[a])},{children:[(0,r.jsx)("div",{children:s}),(0,r.jsx)("input",l({type:u,onChange:function(e){null==i||i(e.target.value)},className:"X8EVb",placeholder:s,value:o,readOnly:d},f))]}))}))},8855:(e,n,a)=>{a.d(n,{xv:()=>s,PH:()=>c,lg:()=>i});var r=a(5893),t=a(7294),o=a(9558);const l={Text:"Fs9AT",error:"F9oLX",left:"dBqPI",center:"iJw6m",right:"j4UBr"};var i,c,u=function(){return u=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},u.apply(this,arguments)};!function(e){e.PRIMARY="primary",e.ERROR="error"}(i||(i={})),function(e){e.LEFT="left",e.CENTER="center",e.RIGHT="right"}(c||(c={}));var s=(0,t.memo)((function(e){var n,a=e.className,t=e.title,s=e.text,d=e.theme,f=void 0===d?i.PRIMARY:d,v=e.align,h=void 0===v?c.LEFT:v,p=((n={})[l[f]]=!0,n[l[h]]=!0,n);return(0,r.jsxs)("div",u({className:(0,o.A)(l.Text,p,[a])},{children:[t&&(0,r.jsx)("h2",{children:t}),s&&(0,r.jsx)("p",{children:s})]}))}))}}]);