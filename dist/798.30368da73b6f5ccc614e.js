"use strict";(self.webpackChunkreact_middle=self.webpackChunkreact_middle||[]).push([[798],{7798:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var s,r=a(9887),l=a(7294),n=a(3942),c=a(5518),i=a(5255),o=a(6425),d=a(8349),u=a(8312),h=a(6002),m=a(9457),x=a(4187);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},g.apply(this,arguments)}const p=e=>l.createElement("svg",g({width:24,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=l.createElement("path",{d:"M11.075 1.633c.32-.844 1.53-.844 1.852 0l2.07 5.734a.99.99 0 0 0 .926.633h5.087c.94 0 1.35 1.17.61 1.743L18 13a.968.968 0 0 0-.321 1.092L19 19.695c.322.9-.72 1.673-1.508 1.119l-4.917-3.12a1 1 0 0 0-1.15 0l-4.917 3.12c-.787.554-1.83-.22-1.508-1.119l1.322-5.603A.968.968 0 0 0 6 13L2.38 9.743C1.64 9.17 2.053 8 2.99 8h5.087a.989.989 0 0 0 .926-.633l2.07-5.734h0Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})));var j=a(3895);const v={starIcon:"Z1C6Y",hovered:"Qpbxq",selected:"ouStZ"};var k=a(5893);const b=[1,2,3,4,5],C=(0,l.memo)((e=>{const{className:t,size:a=30,selectedStars:s=0,onSelect:r}=e,[n,c]=(0,l.useState)(s),[i,o]=(0,l.useState)(Boolean(s)),d=()=>{i||c(0)},u=e=>()=>{i||(r?.(e),c(e),o(!0))};return(0,k.jsx)("div",{className:(0,x.A)(v.StarRating,{},[t]),children:b.map((e=>{return(0,k.jsx)(j.J,{className:(0,x.A)(v.starIcon,{[v.hovered]:n>=e,[v.selected]:i},[]),Svg:p,width:a,height:a,onMouseEnter:(t=e,()=>{i||c(t)}),onMouseLeave:d,onClick:u(e)},e);var t}))})}));var y=a(1715);const f=(0,l.memo)((e=>{const{className:t,onAccept:a,feedbackTitle:s,hasFeedback:n,onCancel:x,title:g,rate:p=0}=e,{t:j}=(0,r.$G)(),[v,b]=(0,l.useState)(!1),[f,I]=(0,l.useState)(p),[S,N]=(0,l.useState)(""),L=(0,l.useCallback)((e=>{I(e),n?b(!0):a?.(e)}),[n,a]),O=(0,l.useCallback)((()=>{b(!1),a?.(f,S)}),[S,a,f]),w=(0,l.useCallback)((()=>{b(!1),x?.(f)}),[x,f]),A=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(y.xv,{title:s}),(0,k.jsx)(u.I,{value:S,onChange:N,placeholder:j("Your review")})]});return(0,k.jsxs)(o.Z,{className:t,max:!0,children:[(0,k.jsxs)(m.g,{align:"center",gap:"8",children:[(0,k.jsx)(y.xv,{title:f?j("Thank you for rating"):g}),(0,k.jsx)(C,{selectedStars:f,size:40,onSelect:L})]}),(0,k.jsx)(c.I3,{children:(0,k.jsx)(h.u,{isOpen:v,lazy:!0,children:(0,k.jsxs)(m.g,{max:!0,gap:"32",children:[A,(0,k.jsxs)(m.U,{max:!0,gap:"16",justify:"end",children:[(0,k.jsx)(i.zx,{onClick:w,theme:i.Wu.OUTLINE_RED,children:j("Close")}),(0,k.jsx)(i.zx,{onClick:O,theme:i.Wu.OUTLINE,children:j("Send")})]})]})})}),(0,k.jsx)(c.$,{children:(0,k.jsx)(d.d,{isOpen:v,lazy:!0,onClose:w,children:(0,k.jsxs)(m.g,{gap:"32",children:[A,(0,k.jsx)(i.zx,{fullWidth:!0,onClick:O,size:i.qE.L,theme:i.Wu.OUTLINE,children:j("Send")})]})})})]})})),I=a(6628).p.injectEndpoints({endpoints:e=>({getArticleRating:e.query({query:e=>{let{userId:t,articleId:a}=e;return{url:"/article-ratings",params:{userId:t,articleId:a}}}}),rateArticle:e.mutation({query:e=>({url:"/article-ratings",method:"POST",body:e})})})}),S=I.useGetArticleRatingQuery,N=I.useRateArticleMutation;var L=a(5321),O=a(3312);const w=(0,l.memo)((e=>{const{className:t,articleId:a}=e,{t:s}=(0,r.$G)("articles_details"),c=(0,n.v9)(L.m5),{data:i,isLoading:o}=S({userId:c?.id??"",articleId:a}),[d]=N(),u=(0,l.useCallback)(((e,t)=>{try{d({articleId:a,rate:e,userId:c?.id??"",feedback:t})}catch(e){console.log(e)}}),[a,d,c?.id]),h=(0,l.useCallback)((e=>{u(e)}),[u]),m=(0,l.useCallback)(((e,t)=>{u(e,t)}),[u]);if(o)return(0,k.jsx)(O.O,{width:"100%",height:120});const x=i?.[0];return(0,k.jsx)(f,{onAccept:m,onCancel:h,className:t,rate:x?.rate,title:s("Rate the article"),feedbackTitle:s("Leave your feedback about the article"),hasFeedback:!0})}))},8312:(e,t,a)=>{a.d(t,{I:()=>c});var s=a(7294),r=a(4187);var l=a(9457),n=a(5893);const c=(0,s.memo)((e=>{const{className:t,value:a="",onChange:s,type:c="text",placeholder:i,readonly:o,...d}=e,u={fTN1P:o};return(0,n.jsxs)(l.g,{gap:"4",max:!0,className:(0,r.A)("LuFDU",u,[t]),children:[(0,n.jsx)("div",{children:i}),(0,n.jsx)("input",{type:c,onChange:e=>{s?.(e.target.value)},className:"X8EVb",placeholder:i,value:a,readOnly:o,...d})]})}))}}]);